{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sairahulpadma/Desktop/UNT/SPRING-2024/SE/partpro-del3/partpro-management-system/src/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sairahulpadma/Desktop/UNT/SPRING-2024/SE/partpro-del3/partpro-management-system/src/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sairahulpadma/Desktop/UNT/SPRING-2024/SE/partpro-del3/partpro-management-system/src/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import DashboardServices from'../../services/DashboardServices';import{FeaturesSec}from\"../../components/DetaisSection/Features.elements\";import{GlobalStateContext}from'../../GlobalStateContext';import{Button}from\"../../components/ButtonElement\";import'../ProductDetailsComponent/ProductDetails.css';import Navbar from\"../../components/DashboardNavBar/index\";import{Form,Modal}from'react-bootstrap';import{HeroBtnWrapper,ArrowForward,ArrowRight}from\"../../components/HeroSection/HeroElements\";import CustomerServices from'../../services/CustomerServices';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ManageFeedbackComponent=function ManageFeedbackComponent(){var _useContext=useContext(GlobalStateContext),_useContext2=_slicedToArray(_useContext,2),state=_useContext2[0],dispatch=_useContext2[1];var navigate=useNavigate();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setId=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),viewrating=_useState10[0],setViewRating=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showViewRatingModal=_useState12[0],setShowViewRatingModal=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showRatingModal=_useState14[0],setShowRatingModal=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),hover=_useState16[0],setHover=_useState16[1];var onHover=function onHover(){setHover(!hover);};var handleRating=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return CustomerServices.manageFeedback(state.userData.userId,id,rating).then(function(resp){console.log(resp);if(resp.data==='Feedback changed'&&resp.status===200){setShowRatingModal(false);navigate('/dashboard');}}).catch(function(err){console.log(err);});case 3:response=_context.sent;case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleRating(_x){return _ref.apply(this,arguments);};}();var handleFeedbackClick=function handleFeedbackClick(event,param){event.preventDefault();if(param!==undefined){setId(param.productId);setShowRatingModal(true);}};var handleViewFeedbackClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event,param){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(param!==undefined)){_context2.next=5;break;}_context2.next=4;return CustomerServices.viewFeedback(state.userData.userId,param.productId).then(function(resp){console.log(resp);if(resp.status===200){setViewRating(resp.data.rating);setShowViewRatingModal(true);}}).catch(function(err){console.log(err);});case 4:response=_context2.sent;case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleViewFeedbackClick(_x2,_x3){return _ref2.apply(this,arguments);};}();var getData=function getData(){DashboardServices.getAllProducts().then(function(response){console.log(response.data);var modifiedData=response.data.map(function(item){return{productId:item.productId,productName:item.productName,productImage:generateImage(item.productImage),productDescription:item.productDescription,productPrice:item.productPrice};});setProducts(modifiedData);setLoading(function(e){return!e;});}).catch(function(error){console.log(error);});};var generateImage=function generateImage(base64Image){var imageData=base64Image.split(\",\")[1];var decodedImage=atob(imageData);var arrayBuffer=new Uint8Array(decodedImage.length);for(var i=0;i<decodedImage.length;i++){arrayBuffer[i]=decodedImage.charCodeAt(i);}var blob=new Blob([arrayBuffer],{type:'image/jpeg'});return URL.createObjectURL(blob);};useEffect(function(){getData();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(FeaturesSec,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-grid\",children:products.map(function(item){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.productImage,alt:item.productName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:item.productName}),/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",children:item.productDescription}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-price\",children:[\"$\",item.productPrice.toFixed(2)]}),/*#__PURE__*/_jsx(HeroBtnWrapper,{style:{display:\"inline-block\"},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(event){return handleFeedbackClick(event,item);},onMouseEnter:onHover,onMouseLeave:onHover,primary:\"true\",dark:\"true\",children:[\"Add/Update Feedback \",hover?/*#__PURE__*/_jsx(ArrowForward,{}):/*#__PURE__*/_jsx(ArrowRight,{})]})}),/*#__PURE__*/_jsx(HeroBtnWrapper,{style:{display:\"inline-block\"},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(event){return handleViewFeedbackClick(event,item);},onMouseEnter:onHover,onMouseLeave:onHover,primary:\"true\",dark:\"true\",children:[\"View Feedback\",hover?/*#__PURE__*/_jsx(ArrowForward,{}):/*#__PURE__*/_jsx(ArrowRight,{})]})})]})]});})}),/*#__PURE__*/_jsxs(Modal,{show:showRatingModal,onHide:function onHide(){return setShowRatingModal(false);},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Enter Rating\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rating\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Rating\",value:rating,onChange:function onChange(e){return setRating(e.target.value);}})]}),/*#__PURE__*/_jsx(HeroBtnWrapper,{style:{width:\"400px\",display:\"inline-block\"},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(event){return handleRating(event);},onMouseEnter:onHover,onMouseLeave:onHover,primary:\"true\",dark:\"true\",children:[\"Submit \",hover?/*#__PURE__*/_jsx(ArrowForward,{}):/*#__PURE__*/_jsx(ArrowRight,{})]})})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:showViewRatingModal,onHide:function onHide(){return setShowViewRatingModal(false);},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"View Rating\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rating\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\" View Rating\",value:viewrating})]})})})]})]})]});};export default ManageFeedbackComponent;","map":{"version":3,"sources":["/Users/sairahulpadma/Desktop/UNT/SPRING-2024/SE/partpro-del3/partpro-management-system/src/frontend/src/pages/ManageFeedbackComponent/index.js"],"names":["React","useContext","useState","useEffect","useLocation","useNavigate","DashboardServices","FeaturesSec","GlobalStateContext","Button","Navbar","Form","Modal","HeroBtnWrapper","ArrowForward","ArrowRight","CustomerServices","ManageFeedbackComponent","state","dispatch","navigate","loading","setLoading","products","setProducts","id","setId","rating","setRating","viewrating","setViewRating","showViewRatingModal","setShowViewRatingModal","showRatingModal","setShowRatingModal","hover","setHover","onHover","handleRating","event","preventDefault","manageFeedback","userData","userId","then","resp","console","log","data","status","catch","err","response","handleFeedbackClick","param","undefined","productId","handleViewFeedbackClick","viewFeedback","getData","getAllProducts","modifiedData","map","item","productName","productImage","generateImage","productDescription","productPrice","e","error","base64Image","imageData","split","decodedImage","atob","arrayBuffer","Uint8Array","length","i","charCodeAt","blob","Blob","type","URL","createObjectURL","toFixed","display","target","value","width"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect} from 'react';\nimport { useLocation, useNavigate} from 'react-router-dom';\nimport DashboardServices from '../../services/DashboardServices';\nimport {\n    FeaturesSec\n} from \"../../components/DetaisSection/Features.elements\";\nimport {GlobalStateContext} from  '../../GlobalStateContext'\nimport { Button } from \"../../components/ButtonElement\";\nimport '../ProductDetailsComponent/ProductDetails.css';\nimport Navbar from \"../../components/DashboardNavBar/index\"\nimport {  Form, Modal } from 'react-bootstrap';\nimport {\n    HeroBtnWrapper,\n    ArrowForward,\n    ArrowRight,\n  } from \"../../components/HeroSection/HeroElements\"\nimport CustomerServices from '../../services/CustomerServices';\nconst ManageFeedbackComponent = () => {\n    const [state, dispatch] = useContext(GlobalStateContext);\n    const navigate = useNavigate();\n    const [loading, setLoading] = useState(true)\n    const [products, setProducts] = useState([])\n    const [id,setId]=useState('')\n    const [ rating, setRating] = useState('')\n    const [viewrating, setViewRating]= useState('')\n    const [showViewRatingModal, setShowViewRatingModal]=useState(false)\n    const [showRatingModal, setShowRatingModal] = useState(false);\n    const [hover, setHover] = useState(false);\n\n    const onHover = () => {\n        setHover(!hover);\n      };\n\n      const handleRating =async (event)=>{\n        event.preventDefault()\n        const response = await CustomerServices.manageFeedback(state.userData.userId, id,rating).then(resp => {\n            console.log(resp)\n          if (resp.data === 'Feedback changed' && resp.status === 200) {\n            setShowRatingModal(false);\n           navigate('/dashboard')\n          }\n        }).catch(err => {\n          console.log(err)\n        })\n      }\n\n      const handleFeedbackClick=(event,param)=>{\n        event.preventDefault()\n        if(param!== undefined)\n        {\n            setId(param.productId)\n    setShowRatingModal(true);\n        }\n      }\n\n      const handleViewFeedbackClick= async (event,param)=>{\n        event.preventDefault()\n        if(param !==undefined){\n          const response = await CustomerServices.viewFeedback(state.userData.userId, param.productId).then(resp => {\n            console.log(resp)\n          if (resp.status === 200) {\n            setViewRating(resp.data.rating)\n            setShowViewRatingModal(true);\n          }\n        }).catch(err => {\n          console.log(err)\n        })\n        }\n      }\n\n      \n    const getData = () => {\n        DashboardServices.getAllProducts().then(response => {\n            console.log(response.data)\n            const modifiedData = response.data.map(item => ({\n                productId: item.productId,\n                productName: item.productName,\n                productImage: generateImage(item.productImage),\n                productDescription: item.productDescription,\n                productPrice: item.productPrice\n            }));\n            setProducts(modifiedData)\n            setLoading(e => !e)\n        }).catch(error => {\n            console.log(error)\n        })\n    }\n   \n\n    const generateImage = (base64Image) => {\n        const imageData = base64Image.split(\",\")[1];\n        const decodedImage = atob(imageData);\n        const arrayBuffer = new Uint8Array(decodedImage.length);\n        for (let i = 0; i < decodedImage.length; i++) {\n            arrayBuffer[i] = decodedImage.charCodeAt(i);\n        }\n        const blob = new Blob([arrayBuffer], { type: 'image/jpeg' });\n        return URL.createObjectURL(blob);\n    }\n\n    useEffect(() => {\n        getData();\n    }, []);\n\n    return (\n        <>\n            <Navbar>\n            </Navbar>\n            <FeaturesSec>\n                <div className=\"product-grid\">\n                    {products.map((item) => (\n                        <>\n                            <div className=\"product-image\">\n                                <img src={item.productImage} alt={item.productName} />\n                            </div>\n                            <div className=\"product-info\">\n                                <h1>{item.productName}</h1>\n                                <p className=\"product-description\">{item.productDescription}</p>\n                                <p className=\"product-price\">${item.productPrice.toFixed(2)}</p>\n                                <HeroBtnWrapper style={{ display: \"inline-block\" }}>\n                                    <Button\n                                        onClick={(event) => handleFeedbackClick(event,item)}\n                                        onMouseEnter={onHover}\n                                        onMouseLeave={onHover}\n                                        primary=\"true\"\n                                        dark=\"true\"\n                                    >\n                                        Add/Update Feedback {hover ? <ArrowForward /> : <ArrowRight />}\n                                    </Button>\n                                </HeroBtnWrapper>\n\n                                <HeroBtnWrapper style={{ display: \"inline-block\" }}>\n                                    <Button\n                                        onClick={(event) => handleViewFeedbackClick(event,item)}\n                                        onMouseEnter={onHover}\n                                        onMouseLeave={onHover}\n                                        primary=\"true\"\n                                        dark=\"true\"\n                                    >\n                                        View Feedback{hover ? <ArrowForward /> : <ArrowRight />}\n                                    </Button>\n                                </HeroBtnWrapper>\n                            </div>\n                        </>\n                    ))}\n                </div>\n                  \n          <Modal show={showRatingModal} onHide={() => setShowRatingModal(false)}>\n            <Modal.Header closeButton>\n              <Modal.Title>Enter Rating</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              <Form>\n                <Form.Group>\n                  <Form.Label>Rating</Form.Label>\n                  <Form.Control type=\"text\" placeholder=\"Rating\"\n                    value={rating}\n                    onChange={(e) => setRating(e.target.value)} />\n                </Form.Group>\n                <HeroBtnWrapper style={{ width: \"400px\", display: \"inline-block\" }}>\n                  <Button\n                    onClick={(event) => handleRating(event)}\n                    onMouseEnter={onHover}\n                    onMouseLeave={onHover}\n                    primary=\"true\"\n                    dark=\"true\"\n                  >\n                    Submit {hover ? <ArrowForward /> : <ArrowRight />}\n                  </Button>\n                </HeroBtnWrapper>\n              </Form>\n            </Modal.Body>\n          </Modal>\n\n          <Modal show={showViewRatingModal} onHide={() => setShowViewRatingModal(false)}>\n            <Modal.Header closeButton>\n              <Modal.Title>View Rating</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              <Form>\n                <Form.Group>\n                  <Form.Label>Rating</Form.Label>\n                  <Form.Control type=\"text\" placeholder=\" View Rating\"\n                    value={viewrating} />\n                </Form.Group>\n              </Form>\n            </Modal.Body>\n          </Modal>\n            </FeaturesSec>\n        </>\n    );\n}\n\nexport default ManageFeedbackComponent;"]},"metadata":{},"sourceType":"module"}